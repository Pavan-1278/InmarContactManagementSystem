<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<link rel="stylesheet" type="text/css" href="regis.css">
	<script type="text/javascript" src="angular.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		"use strict"
		var app=angular.module("contact",[]);
		app.controller("manage",function($scope){
			$scope.collect="";
			app.service("fetch",function($http){
			this.getMyData=function(v){
				//	alert("Hai");

				var request = $http({ 
                     method: "post", 
                     url: "addcontact.php", 
                     headers:{'content-type':'application/x-www-form-urlencoded'}, 
                     transformRequest: function(obj) {
                                                  var str = [];
                                                  for(var p in obj)
                                                  {
                                                        //console.log(p);
                                                        str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
                                                  }                                                      
                                                  //alert(str.join("&"));
                                                    return str.join("&");
                                            },
                     data: { 
                         
                        fname: v.fname,
						email:v.email,				
						phnno:v.phnno                        
                     } 
                 }); 
  
                 // Store the data-dump of the FORM scope. 
                 request.success( 
                     function( data ) { 
  
                         //v.message = data; 
                         //alert(JSON.stringify(data));
                         v.collect=data;

                     } 
                 ); 
		 
			}
		});
		app.controller("manage",function($scope,fetch){
			$scope.collect="";
			$scope.show=function(){
			//alert("Hai");			
				fetch.getMyData($scope);
			}
		});
	</script>
</head>
<body ng-app="contact" ng-controller="manage">
	<div class="container">
		<div class="row form_row">
			<div class="col-md-4 form_col"></div>
			<div class="col-md-4">
				<form method="post" name="regform" action="register.php" novalidate>
					<div><h2>Registration Form</h2></div>
					<div>
						<label class="labelname">Name:</label>
						<label class="req">*</label>
						<input class="form-control" type="text" name="fname" ng-model="fname" ng-required="true" ng-pattern="/^[A-Za-z]+[A-Za-z ]$/">
						<span ng-show="regform.fname.$invalid && !regform.fname.$pristine">Name is required</span>
					</div>
					<div>
						<label class="labelname">Email:</label>
						<label class="req">*</label>
						<input class="form-control" type="text" name="email" ng-model="email" ng-pattern="/^[A-Za-z_]\w+@inmar\.com$/">
						<span ng-show="regform.email.$error.pattern">Enter valid Email</span>
					</div>
					<div>
						<label class="labelname">Phone Number:</label>
						<label class="req">*</label>
						<input class="form-control" type="text" name="phnno" ng-model="phnno" ng-minlength="10" maxlength="10" ng-pattern="/^[0-9]{10}$/">
						<span ng-show="regform.phno.$error.pattern">Enter a valid phone number</span>
				<!--<span ng-show="regform.phno.$error.number" >Enter only numbers</span>-->
						<span ng-show="regform.phno.$error.minlength">Enter 10 digits only</span>
					</div>
					<button ng-disabled="regform.$invalid" type="submit" class="btn btn-success">submit</button>
				</form>
			</div>
			<div class="col-md-4"></div>
		</div>
	</div>
</body>
</html>